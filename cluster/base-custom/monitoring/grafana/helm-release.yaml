apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: grafana-operator
  namespace: monitoring
spec:
  interval: 5m
  chart:
    spec:
      # renovate: registryUrl=https://charts.bitnami.com/bitnami
      chart: grafana-operator
      version: 2.5.4
      sourceRef:
        kind: HelmRepository
        name: bitnami-charts
        namespace: flux-system
      interval: 5m
  values:
    fullNameOverride: "grafana"
    operator:
      image:
        tag: 4.4.1-debian-10-r6
      resources:
        limits:
          cpu: 300m
          memory: 512Mi
        requests:
          cpu: 100m
          memory: 128Mi
      prometheus:
        serviceMonitor:
          enabled: true
    grafana:
      enabled: true
      image:
        registry: docker.io
        repository: bitnami/grafana
        tag: 8.5.2-debian-10-r4
      resources:
        limits:
          cpu: 2
          memory: 4Gi
        requests:
          cpu: 500m
          memory: 512Mi
      envFrom:
        - secretRef:
            name: grafana-secrets
